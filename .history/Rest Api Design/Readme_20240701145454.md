# REST API DESIGN

## Mindset

**1.1 Why Design first?**

- Think how it works at high level

  > Cover almost cases

  > Reduce resources

- Better coordition among other teams
- Good designs make you a good engineer, a potential employee

**1.2 Mindset**

- Scalable ( Khả năng mở rộng )
- Consistency ( Tính thống nhất )
- Inspect every single aspect ( Kiểm tra mọi khía cạnh )
- No one fits all (Trade-offs)

## REST Conventions

**2.1 HTTP Methods**

**_Properties:_**

- Safety: do not alter the server state/data
- Idempotency: a same request is sent once or multiple times, the response is the same.

**_Operations:_**

- Create: `POST`
- Read: `GET`
- Update Totally: `PUT` ( Cập nhật toàn phần)
- Delete: `DELETE`
- Update Partically: `PATCH` (Cập nhật một phần)

| HTTP Method | Safe | Idempotent |
| :---------- | :--- | :--------- |
| GET         | YES  | YES        |
| HEAD        | YES  | YES        |
| OPTIONS     | YES  | YES        |
| TRACE       | YES  | YES        |
| PUT         | NO   | YES        |
| DELETE      | NO   | YES        |
| POST        | NO   | NO         |
| PATCH       | NO   | NO         |

**2.2 RESTful API Conventions**

- Use Nouns Instead of Verbs ( Dùng danh từ không dùng động từ )
- Plural Nouns ( Dùng danh từ số nhiều )
- Use Nesting to Show Relationships
- Versioning
- Slug-case for URL
- Snake_case for request, response body

**_Example_** : `https://software-development.com/api/v1/posts/<post_id>/comments`

**_Practice_** :
![alt text](image.png)
**_Solutions_**:<br>
![alt text](image-1.png)

**2.4 Pagination**

- Page, size parameters:

  > Expample: `GET /users?page=0&size=10`

  > Use case: management portal

  > Must document: Page start counting with 0 or 1

- Offset, limit parameters:

  > Example: `GET /users?offset=0&limit=10`

  > Use case: a infinite scrollable list, newsfeed, logging events...

- _Issue_ : `SELECT * FROM users OFFSET 100 LIMIT 10 ?`

- _Problem_ :
  ![alt text](image-2.png)

- _Solutions_ :
  ![alt text](image-3.png)

**2.5 Sorting**

- `GET /products?sort=price:asc,name:desc`

- `GET

## Case Studies
